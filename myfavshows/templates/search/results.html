{% extends 'base.html' %}

{% block script %}
<script type="text/javascript">
    document.onkeydown = function(e) {
    switch (e.keyCode) {
        case 37:
            if ( {{ current_page }} > 1) {
                window.location.replace("{{ url_for('search.get_results', query=query, page=current_page-1) }}");
            };
            break;
        case 39:
            if ( {{ current_page }} < {{ total_pages }}) {
                window.location.replace("{{ url_for('search.get_results', query=query, page=current_page+1) }}");
            };
            break;
    }
};
</script>
{% endblock %}

{% block header %}
<h1>{% block title %}Search results for "{{ query }}"{% endblock %}</h1>
{{ super() }}
        {% if total_pages %}
        <div>
            Pages :
            {% for i in range(1, total_pages + 1) %}
                {% if i != current_page %}
                <a href="{{ url_for('search.get_results', query=query, page=i) }}">{{i}}
                </a> {% if not loop.last %} - {% endif %}
                {% else %}
                <a style="text-decoration:underline"
                   href="{{ url_for('search.get_results', query=query, page=i) }}">{{i}}</a> {% if not loop.last %} - {% endif %}
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}
{% endblock %}


{% block content %}

    <form class="searchbar" method="post">
    <input type="text" placeholder="Type here to do a new search" name="title" id="title" required>
    <button type="submit"><i class="fa fa-search"></i></button>
    </form>

{% endblock %}
