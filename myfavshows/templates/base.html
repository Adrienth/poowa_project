<!doctype html>

<head>
<title>{% block title %}{% endblock %} - MyShows</title>
<link rel="shortcut icon" href="{{ url_for('static', filename='tvshow.png') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css')}}">
<!-- Load icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<nav>
    <img src="{{ url_for('static', filename='tvshow.png') }}" style="width:30px;margin:6px">
    <h1> <a href="{{ url_for('search.search') }}">
         MyShows </a>
    </h1>
    <ul style="background: #ffffff;">
        {% if session['user_id'] %}
        <li><span> Welcome {{ session['user_name'].capitalize() }}!</span>
        <li><a href="{{ url_for('auth.logout') }}">Log Out</a>
            {% else %}
        <li><a href="{{ url_for('auth.register') }}">Register</a>
        <li><a href="{{ url_for('auth.login') }}">Sign In</a>
            {% endif %}
    </ul>
</nav>

{% block navbar %}
<ul>
    <li><a href="{{ url_for('search.search')}}">New Search</a></li>
    <li><a href="{{ url_for('myfav.get_my_fav')}}">My Favourites</a></li>
    <li><a href="#contact">Contact</a></li>
    <li style="float:right;"><a href="#about">About</a></li>
</ul>
{% endblock %}

<section class="content">
    <header>
        {% block header %}{% endblock %}
    </header>

    {% for message in get_flashed_messages() %}
    <div class="flash">{{ message }}</div>
    {% endfor %}


    {% block content %}{% endblock %}

    {% block show_results %}
    {% for show in shows %}
    <article class="result">
        <div class="flex-container">
            <div class="poster" style="flex-grow: 1">
                {% if show.poster_url %}
                <img src="{{ show['poster_url'] }}" style="width:165px;height:250px;float:center" alt="'{{ show.title }}' poster">
                {% else %}
                <img src="https://www.scenebyte.com/images/no_poster.jpg" style="width:165px;height:250px;float:center" alt="No poster available">
                {% endif %}
            </div>

            <div style="flex-grow: 7">

            {% if session['user_id'] and show.id in session['show_ids'] %}
            <a href="{{ url_for('myfav.rm_from_fav',show_id=show.id, name=show.title ) }}" title="Remove '{{ show.title }}' from favourites" class="hearticon">
                <i class="fa fa-heart"></i>
            </a>
            {% else %}
            <a href="{{ url_for('myfav.add_to_fav',show_id=show.id, name=show.title ) }}" title="Add '{{ show.title }}' to favourites" class="hearticon" >
                <i class="fa fa-heart-o"></i>
            </a>
            {% endif %}
            <header>
                <div>
                    {% if show.next_episode_to_air %}
                    <h1> <a href="{{ url_for('myshow.get_my_show', show_id=show.id) }}"> {{ show.title }} </a> <span style="float:right; color:red"> New episodes coming </span> </h1>
                    {% else %}
                    <h1> <a href="{{ url_for('myshow.get_my_show', show_id=show.id) }}"> {{ show.title }} </a> </h1>
                    {% endif %}
                    <div class="about">First aired in {{ show.date }} | {{ show.vote_average }} <i class="fa fa-star gradient-icon"></i></div>
                </div>

            </header>
            <p class="body">{{ show.trunc_overview}}</p>
            </div>
        </div>
    </article>
    {% if not loop.last %}
    <hr>
    {% endif %}
    {% endfor %}
    {% endblock %}
</section>